# 坦克大战 (Tank Battle)

一个用 Rust 和 Macroquad 开发的现代化坦克大战游戏，具有智能AI和丰富的游戏机制。

## 🎮 游戏特性

- **精美的坦克战斗**: 控制蓝色坦克与智能红色敌方坦克战斗
- **智能AI系统**: 
  - 预测性瞄准
  - 战术侧向移动
  - 智能障碍物避让
  - 边界检测和避让
- **完善的障碍物系统**: 包含可破坏的墙壁和不可破坏的钢铁障碍
- **丰富的道具系统**: 
  - 🟢 生命恢复 (+50 HP)
  - 🟡 防护盾 (30秒无敌)
  - 🟣 散弹射击 (多发子弹)
  - 🔵 速度提升 (移动加速)
  - 🔴 伤害增强 (攻击力提升)
- **数学挑战复活系统**: 玩家死亡后可通过解答数学题复活
- **动态难度调节**: 三个难度等级，游戏过程中难度逐渐增加
- **波数系统**: 每波敌人数量递增，挑战性不断提升
- **分数统计**: 击败敌人和收集道具获得分数，追求最高分

## 控制方式

- **移动**: WASD 或方向键
- **瞄准**: 鼠标移动
- **射击**: 鼠标左键或空格键
- **暂停**: ESC 键
- **重新开始**: R 键（游戏结束后）

## 🎯 游戏难度

在主菜单选择难度：
- **1 - 简单**: 
  - 敌方坦克移动速度快 (160 单位/秒)
  - 智能AI：预测瞄准、战术移动
  - 射击频率适中
  - 适合新手玩家
- **2 - 普通**: 
  - 平衡的游戏体验
  - 中等AI智能度
  - 标准射击频率
- **3 - 困难**: 
  - 更多敌人，更快的节奏
  - 高攻击性AI
  - 高射击频率

## 运行游戏

确保已安装 Rust，然后运行：

```bash
cargo run --release
```

## 依赖项

- `macroquad`: 游戏引擎和图形渲染
- `rand`: 随机数生成
- `serde`: 数据序列化（为未来的存档功能预留）

## ⚙️ 游戏机制

### 🚗 坦克系统
- **玩家坦克**（蓝色）：200点生命值，高机动性
- **敌方坦克**（红色）：50点生命值，智能AI控制
- **护盾系统**：激活时完全免疫伤害，带有闪烁视觉效果
- **碰撞检测**：精确的边界和障碍物碰撞，防止卡住和抖动

### 🔫 武器系统
- **普通子弹**：25点伤害，高精度
- **散弹射击**：15点伤害/发，一次发射多发子弹
- **射击冷却**：玩家0.25秒，敌方根据难度调整

### 🤖 智能AI系统
- **预测性瞄准**：AI会预测玩家移动轨迹进行瞄准
- **战术移动**：侧向移动、包围战术
- **智能避让**：
  - 渐进式边界避让，防止抖动
  - 平滑障碍物绕行
  - 距离感知的避让强度
- **难度自适应**：根据游戏难度调整行为模式

### 🎁 道具效果
- **生命恢复** 🟢: +50 生命值，最大200
- **防护盾** 🟡: 30秒无敌时间，视觉闪烁效果
- **散弹射击** 🟣: 临时获得多发子弹能力
- **速度提升** 🔵: 移动速度增加50%
- **伤害增强** 🔴: 攻击力显著提升

### 🧮 数学挑战系统
- 玩家死亡后触发随机数学题
- 答对可复活并恢复50%生命值
- 答错或跳过则游戏结束
- 增加游戏的教育性和趣味性

## 🛠️ 技术特性

- **模块化架构**：清晰的代码结构，易于维护和扩展
- **实体组件系统**：灵活的游戏对象管理
- **高性能碰撞检测**：
  - 精确的圆形-矩形碰撞检测
  - 预测性碰撞避免
  - 平滑的物理响应
- **智能生成系统**：动态敌人和道具生成
- **现代UI系统**：清晰的游戏界面和HUD
- **安全移动系统**：防止实体卡在障碍物中

## 🎨 视觉效果

- **3D风格坦克渲染**：带阴影和高光的立体坦克
- **粗壮炮管设计**：更具视觉冲击力
- **护盾闪烁效果**：动态的保护状态指示
- **平滑动画**：流畅的移动和旋转
- **道具闪烁**：吸引玩家注意的道具效果

## 🚀 性能优化

- **Rust语言**：内存安全和高性能
- **Macroquad引擎**：轻量级游戏引擎
- **高效渲染**：优化的绘制调用
- **智能更新**：只更新必要的游戏对象

## 📋 未来计划

- 🔊 音效和背景音乐系统
- 🌍 更多地图和关卡
- 🎯 更多武器类型和特殊能力
- 👥 多人游戏模式
- 🏆 成就系统和排行榜
- 💾 游戏存档和设置保存
- 🎨 更丰富的视觉效果
- 🤖 更多AI行为模式

## 🎮 开始游戏

准备好体验这个充满挑战和乐趣的坦克大战了吗？

```bash
cargo run --release
```

**祝你游戏愉快！** 🚀🎯